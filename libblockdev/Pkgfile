# Description:	Library for manipulating block devices
# URL:		https://github.com/storaged-project/libblockdev
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	gobject-introspection libbytesize ndctl parted volume_key

name=libblockdev
version=2.28
release=0
source=(https://github.com/storaged-project/${name}/releases/download/${version}-1/${name}-${version}.tar.gz \
	fix-glibc-glob-onlydir.patch)

build() {
	cd ${name}-${version}

	patch -p1 -i $SRC/fix-glibc-glob-onlydir.patch

	./configure \
		--prefix=/usr \
		--sysconfdir=/etc \
		--without-dmraid \
		--without-lvm_dbus

	make V=1

	make DESTDIR=$PKG install

	find $PKG -type f -name '*.la' -delete
}
