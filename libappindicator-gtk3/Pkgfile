# Description:	Allow applications to extend a menu via Ayatana indicators in Unity, KDE or Systray
# URL:		https://launchpad.net/libappindicator
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	libdbusmenu-gtk3 libindicator-gtk3 dbus-glib vala

name=libappindicator-gtk3
_realname=libappindicator
version=12.10.1_p20200706
_version=${version%_p*}+20.10.${version#*_p}.1
release=1
source=(https://launchpad.net/ubuntu/+archive/primary/+files/${_realname}_${_version}.orig.tar.gz \
	no-gtk-doc-make.patch \
	improved-plasma.patch)

build() {
	cd $SRC
	patch -p1 -i $SRC/no-gtk-doc-make.patch
	patch -p1 -i $SRC/improved-plasma.patch

	autoreconf -fiv

	./configure \
		--prefix=/usr \
		--sysconfdir=/etc \
		--localstatedir=/var \
		--enable-introspection \
		--disable-gtk-doc-html \
		--disable-mono-test \
		--disable-static \
		--with-gtk=3

	make V=1

	make -j1 DESTDIR=$PKG install
}
