# Description:	Highly customizable Wayland bar for Sway and Wlroots based compositors
# URL:		https://github.com/Alexays/Waybar/
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	gtk-layer-shell gtkmm3 libdbusmenu libnl pulseaudio scdoc spdlog

name=waybar
_realname=Waybar
version=0.9.17-34-ge7af29a
_commit=e7af29ac1e2189f3d39d513feb814dab10b86fd7
# Date:   Mon Jan 23 17:07:21 2023 +0100
release=1
source=()

build() {
	cd $SRC
	git clone https://github.com/Alexays/Waybar.git
	cd $SRC/${_realname}
	git reset --hard ${_commit}

	build-meson \
		-Ddefault_library=shared \
		-Dgtk-layer-shell=enabled \
		-Ddbusmenu-gtk=enabled \
		-Dlibnl=enabled \
		-Dlibudev=enabled \
		-Dlibevdev=enabled \
		-Dpulseaudio=enabled \
		-Dman-pages=enabled \
		-Dsystemd=disabled \
		-Dmpd=disabled \
		-Drfkill=enabled \
		-Dsndio=disabled \
		-Dtests=disabled \
		-Dexperimental=true \
		. build

	meson compile ${JOBS:+-j ${JOBS}} -v -C build

	DESTDIR=$PKG meson install --no-rebuild -C build

	rm $PKG/usr/share/man/man5/waybar-sndio.5
}
