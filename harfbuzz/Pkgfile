# Description:	Text shaping library
# URL:		https://freedesktop.org/wiki/Software/HarfBuzz
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	cairo gobject-introspection graphite2 icu

name=harfbuzz
version=3.3.2
release=2
source=(https://github.com/${name}/${name}/releases/download/${version}/${name}-${version}.tar.xz)

build() {
	cd ${name}-${version}

	# problem gcc 12.0.1 - undefined reference to `__gxx_personality_v0':
	# solution - add line -Dc_link_args="-lstdc++"

	build-meson \
		-Dglib=enabled \
		-Dgobject=enabled \
		-Dintrospection=enabled \
		-Dicu=enabled \
		-Dfreetype=enabled \
		-Dcairo=enabled \
		-Dgraphite=enabled \
		-Dbenchmark=disabled \
		-Ddocs=disabled \
		-Dc_link_args="-lstdc++" \
		. build

	meson compile ${JOBS:+-j ${JOBS}} -v -C build

	DESTDIR=$PKG meson install --no-rebuild -C build
}
