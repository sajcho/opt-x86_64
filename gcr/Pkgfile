# Description:	Library for bits of crypto UI and parsing
# URL:		https://wiki.gnome.org/Projects/CryptoGlue
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	gtk3 libsecret openssh p11-kit vala

name=gcr
version=3.41.1
release=0
source=(https://download.gnome.org/sources/${name}/${version%.*}/${name}-${version}.tar.xz \
	fix-64-bit-time_t-32-bit.patch)

build() {
	cd ${name}-${version}

	patch -p1 -i $SRC/fix-64-bit-time_t-32-bit.patch

	build-meson \
		-Dgtk_doc=false \
		-Dgpg_path=/usr/bin/gpg2 \
		-Dsystemd=disabled \
		. build

	meson compile ${JOBS:+-j ${JOBS}} -C build

	DESTDIR=$PKG meson install --no-rebuild -C build

	rm -r $PKG/usr/share/locale
}
