# Description:	Window manager designed for speed, usability and consistency
# URL:		https://github.com/ice-wm/icewm
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	asciidoctor gdk-pixbuf-xlib librsvg libsndfile libxcomposite libxinerama libxpm

name=icewm
version=2.7.0
release=1
source=(https://github.com/ice-wm/${name}/archive/${version}/${name}-${version}.tar.gz)

build() {
	cd ${name}-${version}

	mkdir build
	cd build

	cmake .. \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCFGDIR=/etc \
		-DCONFIG_GDK_PIXBUF_XLIB=ON \
		-DCONFIG_IMLIB2=OFF \
		-DCONFIG_LIBRSVG=ON \
		-DCONFIG_XPM=ON \
		-DCONFIG_XFREETYPE=ON \
		-DXINERAMA=ON \
		-DENABLE_ALSA=ON \
		-DENABLE_NLS=OFF \
		-DENABLE_LTO=OFF \
		-DXTERMCMD=urxvt

	make

	make DESTDIR=$PKG install

	rm -r $PKG/usr/share/{doc,locale}
}
